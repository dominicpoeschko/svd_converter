diff --git a/CMakeLists.txt b/CMakeLists.txt
index f3872ae..866b30c 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,26 +1,26 @@
-cmake_minimum_required(VERSION 3.5)
+cmake_minimum_required(VERSION 3.28)
 
 # See https://cmake.org/cmake/help/latest/policy/CMP0077.html
 # This allows for setting option variables externally, when this project
 # is included in another CMake project.
 cmake_policy(SET CMP0077 NEW)
 
 project(inja LANGUAGES CXX VERSION 3.5.0)
 
 
 option(BUILD_TESTING "Build unit tests" ON)
 option(COVERALLS "Generate coveralls data" OFF)
 option(INJA_BUILD_TESTS "Build unit tests when BUILD_TESTING is enabled." ON)
 option(INJA_ENABLE_CLANG_TIDY "Enable clang-tidy" OFF)
 option(INJA_EXPORT "Export the current build tree to the package registry" ON)
 option(INJA_INSTALL "Generate install targets for inja" ON)
 option(INJA_INSTALL_SINGLE_HEADER "Install the single header instead" OFF)
 option(INJA_USE_EMBEDDED_JSON "Use the shipped json header if not available on the system" ON)
 
 
 set(INJA_INSTALL_INCLUDE_DIR "include")
 set(INJA_PACKAGE_USE_EMBEDDED_JSON OFF)
 set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR}/cmake)
 
 
 # For using the correct __cplusplus macro
@@ -43,62 +43,62 @@ target_compile_features(inja INTERFACE cxx_std_17)
 if(INJA_USE_EMBEDDED_JSON)
   find_package(nlohmann_json QUIET)
   if(NOT nlohmann_json_FOUND)
     set(INJA_PACKAGE_USE_EMBEDDED_JSON ON)
     add_library(nlohmann_json INTERFACE)
     add_library(pantor::nlohmann_json ALIAS nlohmann_json)
 
     target_include_directories(nlohmann_json INTERFACE
       $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/third_party/include>
       $<INSTALL_INTERFACE:${INJA_INSTALL_INCLUDE_DIR}/nlohmann>
     )
 
     target_compile_features(nlohmann_json INTERFACE cxx_std_17)
 
     install(TARGETS nlohmann_json EXPORT injaTargets)
 
     set(INJA_SELECTED_JSON_LIBRARY "pantor::nlohmann_json")
   else()
     set(INJA_SELECTED_JSON_LIBRARY "nlohmann_json::nlohmann_json")
   endif()
 else()
   # If target already exists, e.g. by git submodules
   if(TARGET nlohmann_json)
     set(INJA_SELECTED_JSON_LIBRARY "nlohmann_json::nlohmann_json")
 
-    install(TARGETS nlohmann_json EXPORT injaTargets)
+    #    install(TARGETS nlohmann_json EXPORT injaTargets)
   else()
     find_package(nlohmann_json REQUIRED)
     set(INJA_SELECTED_JSON_LIBRARY "nlohmann_json::nlohmann_json")
   endif()
 endif()
 
 
 target_link_libraries(inja INTERFACE ${INJA_SELECTED_JSON_LIBRARY})
 
 
-execute_process(COMMAND scripts/update_single_include.sh WORKING_DIRECTORY ${PROJECT_SOURCE_DIR})
+#execute_process(COMMAND scripts/update_single_include.sh WORKING_DIRECTORY ${PROJECT_SOURCE_DIR})
 
 
 if(BUILD_TESTING AND INJA_BUILD_TESTS)
   enable_testing()
 
   add_definitions(-D__TEST_DIR__=${CMAKE_CURRENT_SOURCE_DIR}/test)
 
   add_executable(inja_test test/test.cpp)
   target_link_libraries(inja_test PRIVATE inja)
   target_include_directories(inja_test PRIVATE include third_party/include)
   add_test(inja_test ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/inja_test)
 
   if(MSVC)
     target_compile_options(inja_test PRIVATE /W4 /permissive-)
   else()
     target_compile_options(inja_test PRIVATE -Wall -Wextra -Werror)
   endif()
 
   if(INJA_ENABLE_CLANG_TIDY)
     find_program(CLANG_TIDY_EXE NAMES "clang-tidy" REQUIRED)
     set(CLANG_TIDY_COMMAND "${CLANG_TIDY_EXE}" "-config-file=${CMAKE_CURRENT_SOURCE_DIR}/.clang-tidy")
     set_target_properties(inja_test PROPERTIES CXX_CLANG_TIDY "${CLANG_TIDY_COMMAND}")
   endif()
 
 
@@ -129,55 +129,55 @@ if(COVERALLS)
 
   coveralls_setup("${COVERAGE_SRCS}" OFF) # If we should upload.
 endif()
 
 
 include(CMakePackageConfigHelpers)
 
 write_basic_package_version_file(
   "${CMAKE_CURRENT_BINARY_DIR}/injaConfigVersion.cmake"
   VERSION ${PROJECT_VERSION}
   COMPATIBILITY SameMajorVersion
 )
 
 
 # build tree package config
 configure_file(
   cmake/config/injaBuildConfig.cmake.in
   injaConfig.cmake
   @ONLY
 )
 
 
 install(TARGETS inja EXPORT injaTargets)
 
 
-export(
-  EXPORT injaTargets
-  NAMESPACE pantor::
-  FILE "${CMAKE_CURRENT_BINARY_DIR}/injaTargets.cmake"
-)
+#export(
+#  EXPORT injaTargets
+#  NAMESPACE pantor::
+#  FILE "${CMAKE_CURRENT_BINARY_DIR}/injaTargets.cmake"
+#)
 
 # build tree package config
 configure_file(
   cmake/config/injaBuildConfig.cmake.in
   injaConfig.cmake
   @ONLY
 )
 
 
 if(INJA_INSTALL)
   set(INJA_CONFIG_PATH "lib/cmake/inja")
 
   # install tree package config
   configure_package_config_file(
     cmake/config/injaConfig.cmake.in
     ${INJA_CONFIG_PATH}/injaConfig.cmake
     INSTALL_DESTINATION ${INJA_CONFIG_PATH}
     NO_CHECK_REQUIRED_COMPONENTS_MACRO
   )
 
   if(INJA_INSTALL_SINGLE_HEADER)
     install(
       DIRECTORY single_include/inja
       DESTINATION ${INJA_INSTALL_INCLUDE_DIR}
       FILES_MATCHING PATTERN "*.hpp"
diff --git a/cmake/config/injaBuildConfig.cmake.in b/cmake/config/injaBuildConfig.cmake.in
index ccbc2ae..dff5c2c 100644
--- a/cmake/config/injaBuildConfig.cmake.in
+++ b/cmake/config/injaBuildConfig.cmake.in
@@ -1,11 +1,11 @@
 set(INJA_VERSION "@PROJECT_VERSION@")
 
 set(INJA_PACKAGE_USE_EMBEDDED_JSON "@INJA_PACKAGE_USE_EMBEDDED_JSON@")
 
 include(CMakeFindDependencyMacro)
 
 if(NOT INJA_PACKAGE_USE_EMBEDDED_JSON)
-    find_dependency(nlohmann_json REQUIRED)
+    #    find_dependency(nlohmann_json REQUIRED)
 endif()
 
 include("${CMAKE_CURRENT_LIST_DIR}/injaTargets.cmake")
